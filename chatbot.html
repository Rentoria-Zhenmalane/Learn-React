<!DOCTYPE html>
<html>

<head>
  <title>Chatbot</title>
</head>

<body>
  <div class="js-container"></div>

  <script src="https://unpkg.com/supersimpledev/react.js"></script>
  <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

  <script src="https://unpkg.com/supersimpledev/babel.js"></script> <!--first load Babel external library -->
  <script type="text/babel"> //This attribute tells Babel to translate all the code here into normal Javascript. Since web browsers don't understand JSX.

    function ChatInput() {
      return (
        <> {/*Using to div to group multiple elements actually create a bunch of extra div. How to Avoid that? Using a fragment*/}
          <input
            placeholder="Send a message to chatbot"
            size="30" />
          <button>Send</button>
        </>

      );
    }

    function ChatMessage({ message, sender })// also called destructuring, even shorter syntax in JS.
    {
      {/*-Components are designed to be reusable
        - Props short for properties, contains all the properties of an attribute.*/ }
      //const {message, sender} = props;  Called as destructuring
      /*
            if (sender === 'robot') {
              return (
                <div>
                  <img src="images/robot.png" width="50" />
                  {message}
                </div>
              );
            }
        This code is the longcut version of code below.
      */
      return (
        <div>
          {sender === 'robot' &&
            <img src="images/robot.png" width="50" />} {/*Called as Guard Operator, If left is true then do the right. It's just like an if statement but in JSX.*/}
          {message}
          {sender === 'user' &&
            <img src="images/user.png" width="50" />}

        </div>
      );
    };

    function ChatMessages() {
      const array = React.useState( //state is an important JS feature. It updates HTML when we update the data.
        [{
          message: 'hello Chatbot',
          sender: 'user',
          id: 'id1'
        }, {
          message: 'Hello! How can I help you?',
          sender: 'robot',
          id: 'id2'
        }, {
          message: 'Can you get me todays date?',
          sender: 'user',
          id: 'id3'
        }, {
          message: 'Today is February 21',
          sender: 'robot',
          id: 'id4'
        }]
      ); //useState is updates 
      const chatmsgs = array[0]; // current data of useState
      const setChatMessages = array[1]; //Function that updates the data

      function sendMessage() {
        chatMessages.push({
          message: 'test',
          sender: 'user',
          id: crypto.randomUUID() //JS code that generates unique ID string
        });

        console.log(chatMessages);
      }

      return (
        <>
          <button onClick={sendMessage}>Send message</button>
          {chatMessages.map((chatMessage) => {
            return (
              <ChatMessage
                message={chatMessage.message}
                sender={chatMessage.sender}
                key={chatMessage.id} //key helps React track which items changed. It compares Old list vs New list. This comparison process is called reconciliation. Key should be UNIQUE.
              />
            );
          })}
        </>
      );
    }



    function App() {

      {/*
        const chatMessageComponent = chatMessages.map((chatMessage) => {
        return (
          <ChatMessage
            message={chatMessage.message}
            sender={chatMessage.sender}
          />
        )
      });
       Insted of saving result in a variable, can just directly insert the result directly into JSX in function ChatMessages
      */}



      return (
        <>
          { /*{ChatInput()}
              <ChatInput></ChatInput> Called as Component Syntax, does the same thing as the code above.*/ }

          <ChatInput /> {/* Can also do this kind of syntax if element has no value. Called as Self closing  
          <ChatMessage
            message="hello"
            sender="user" />
          <ChatMessage
            message="Hello! How can I help you?"
            sender="robot" />
          <ChatMessage
            message="Can you get me todays date?"
            sender="user" />
          <ChatMessage
            message="Today is February 21"
            sender="robot" />{/*Reused ChatMessage component here.*/}

          <ChatMessages />

        </>
      );
    }
    //App Component represent the entire application.


    //Use div if you're using multiple elements.
    const container = document.querySelector('.js-container');
    ReactDOM.createRoot(container).render(<App />); // This is where React renders everything by inserting the App component.
  </script>
</body>

</html>

<!--

-What is React? an external library that contains pre-written code

- When building a website split up the website into pieces. So we can work on small pieces of the website at a time.

-We can create our own HTML element in React.

NEXT: 1:27
-->